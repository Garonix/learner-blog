# 错误处理机制

## 什么是错误？

在计算机编程中，错误是指程序在运行过程中遇到的异常情况。这些情况可能导致程序无法正常执行或产生意外的结果。错误可以由多种原因引起，例如无效输入、资源不可用或逻辑缺陷等。

在 Go 语言中，错误被视为程序执行过程中可能产生的常见现象。Go 通过函数返回错误值的方式来处理这些问题，鼓励开发者显式地检查和处理错误，提高代码的健壮性和可维护性。

Go 的设计者觉得 `try/catch` 机制的使用太泛滥了，而且从底层向更高的层级抛异常太耗费资源。他们给 Go 设计的机制也可以“捕捉”异常，但是更轻量，并且只应该作为（处理错误的）最后的手段。

Go 是怎么处理普通错误的呢？通过在函数和方法中返回错误对象作为它们的唯一或最后一个返回值——如果返回 `nil`，则没有错误发生——并且主调 (calling) 函数总是应该检查收到的错误。

## 异常处理对比

在 `Java` 和 `C#` 等编程语言中，错误处理通常是通过 `try-catch` 机制来管理的。当程序在 `try` 块中遇到错误时，`catch` 块会捕获该错误，并执行相应的处理逻辑。这种机制为处理异常提供了一种结构化的方法，确保即使在发生错误的情况下，应用程序也不会意外崩溃。

与此不同，`Go` 语言采用了一种完全不同的错误处理方式。在 `Go` 中，没有传统意义上的异常处理机制。相反，`Go` 将错误视为函数的返回值之一。这意味着在调用函数后，开发者需要主动检查是否返回了错误，并根据情况决定如何处理它。这种方法更加强调显式的错误处理，而不是像 `try-catch` 那样隐式的异常处理。这不仅使代码逻辑更为清晰，还鼓励了更好的错误管理实践。

## error类型

error类型是一个接口，源码如下：

```go
// The error built-in interface type is the conventional interface for
// representing an error condition, with the nil value representing no error.
type error interface {
	Error() string
}
```

所以只要我们的自建类型实现了这个接口，就可以使用很多的错误处理的方法。